<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Exercise Mapbox</title>

    <script src='https://api.mapbox.com/mapbox-gl-js/v1.10.0/mapbox-gl.js'></script>
    <link href='https://api.mapbox.com/mapbox-gl-js/v1.10.0/mapbox-gl.css' rel='stylesheet'/>
    <script src="mapbox-geocoder-utils.js"></script>

    <style>
        #map {
            width: 100%;
            height: 600px;
        }
    </style>
</head>

<body>

<!--Exercises-->
<!--Please follow the instructions below. Remember to commit your changes after each step.
At the end of the exercise, push your changes to GitHub.-->

<!--#1Generate a Mapbox API Key using the steps from above-->
<!--#2Create a new file named mapbox_maps_api.html and add a map using the next steps.-->

<!--#3Generate a map that shows the city with your favorite restaurant using geocoding.-->

<!--#4Redraw the map of the above location at zoom levels 5, 15, and 20. Do this by simply
changing the value of zoom level where the map properties are initially set and refresh the page to see the changes.
Can the zoom be changed programmatically after the initial map is drawn?-->

<!--#5Create a marker on your map of the exact location of your favorite restaurant set the zoom to allow for best viewing distance.-->

<!--#6Create a popup with the name of the restaurant.-->

<!--#7Make sure the info window does not display until the marker has been clicked on.-->

<!--#8Refactor your code to display at least three of your favorite restaurants with information about each.
Create an array of objects with information about each restaurant to accomplish this. Use a .forEach() loop rather than a for loop.-->

<div id='map'></div>
<script src="js/keys.js"></script>


<script>
    mapboxgl.accessToken = mapboxKey;
    var map = new mapboxgl.Map({
        container: 'map',
        style: 'mapbox://styles/mapbox/streets-v9',
        zoom: 10,
        center: {lng: -66.0485001, lat: 18.2341194}, // Caguas, PR
        // center: {lng: -41.65, lat: 14.25}, // titi nane
    });

    //var foodSpots = [
    //         {
    //             name: 'Casa De Mama',
    //             address: '',
    //             message: 'Deliciosa'
    //         },
    //         {
    //             name: "La Panaderia",
    //             address: "",
    //             message: "Bread is life."
    //         },
    //         {
    //             name: "El Yunque",
    //             address: "",
    //             message: "There's a waterfall, enough said!"
    //         }
    //     ];



    // geocode("Jardí­n Botánico y Cultural William Miranda Marín,, PR-156, Caguas, 00726, Puerto Rico", mapboxKey).then(function(results) {
    //     console.log(results);
    //     map.setCenter(results);
    //     map.setZoom(20);
    //     // do something with results
    // });

    var marker = new mapboxgl.Marker();
    marker
        .setLngLat({lng: -66.0485001, lat: 18.2341194})
        .addTo(map);
    var popup = new mapboxgl.Popup()
        .setHTML("<h3>Casa de Mama</h3>");
    marker.setPopup(popup);




//===========================JUSTIN'S SOLUTION=====================================//
//
//     function geocode(search, token) {
//         var baseUrl = 'https://api.mapbox.com';
//         var endPoint = '/geocoding/v5/mapbox.places/';
//         return fetch(baseUrl + endPoint + encodeURIComponent(search) + '.json' + "?" + 'access_token=' + token)
//             .then(function(res) {
//                 return res.json();
//                 // to get all the data from the request, comment out the following three lines...
//             }).then(function(data) {
//                 return data.features[0].center;
//             });
//     }
//
//
//     var restaurants = [
//         {
//             name: 'Silo',
//             address: 'Silo: Elevated Cuisine, San Antonio, TX',
//             message: 'It\'s great!'
//         },
//         {
//             name: 'Chama Gaucha Steakhouse',
//             address: 'Chama Gaucha Steakhouse, San Antonio, TX',
//             message: 'Too good!'
//         },
//         {
//             name: 'Tarka Indian Kitchen',
//             address: 'Tarka Indian Kitchen, San Antonio, TX',
//             message: 'Awesome!'
//         }
//     ];
//
//     restaurants.forEach(function(restaurant) {
//         console.log(restaurant.name)
//
//     })
//     var mapboxkey = "pk.eyJ1Ijoia2NvdHRvIiwiYSI6ImNrOXZoNHg1YzA0bm4za3FuZTVjcThkZXEifQ.723tKsE_Ur6m6DZDahOntA"
//
//     restaurants.forEach(function(restaurant) {
//         geocode(restaurant.address,mapboxkey).then(function(coords) {
//             console.log(coords)
//             var marker = new mapboxgl.Marker()
//                 .setLngLat(coords)
//                 .addTo(map)
//             var popup = new mapboxgl.Popup()
//                 .setHTML('<h3>' + restaurant.name + '</h3>' + '<p>' + restaurant.message + '</p>')
//             marker.setPopup(popup)
//         });
//     });

    function isNumeric(num) {
        if(num === null || num === true || num === false)
            return !isNaN(num);


        function filterNumbers(arr) {
            var nums = [];
            arr.forEach(function(element){
                console.log(arr);
                if (isNumeric(element)) {
                    nums.push(element);
                }
                console.log(nums);
            })
        }

        console.log(filterNumbers(["fred", true, 5, 3]));

</script>



</body>
</html>